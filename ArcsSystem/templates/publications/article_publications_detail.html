{% extends 'base.html' %}
{% load static %}
{% load i18n %}
{% load publications_extras %}


{% block content %}
<div class="detail-view">
<h1>{{ article.title }}</h1>

<p><b>{% trans "Authors" %}:</b> {{ article.authors }}</p>

<p><b>{% trans "Publication Year" %}:</b> {{ article.py }}</p>
<p><b>{% trans "Journal" %}:</b> {{ article.source }}</p>
<p><b>{% trans "Volume/Issue" %}:</b> {{ article.volume }}({{ article.issue }})</p>

<p><b>{% trans "Keywords" %}:</b>
  {% for keyword in article.keywords.all %}
      {{ keyword }},    <!-- looks ugly but here is a comma -->
  {% endfor %}
</p>

<p><b>DOI /URL: </b><a href="https://doi.org/{{ article.doi }}" >{{ article.doi }}</a></p>


<p><b>{% trans "Abstract" %}:</b> {{ article.abstract }}</p>


<div>

<h2>Similar publications</h2>

{% for k in article.keywords.all|slice:":3" %}  <!-- take the first 3 keywords -->

<p>about {{ k }}:<p>

{% for x in k|query_publications %}
{% ifnotequal x.doi article.doi %}  <!-- avoids listing the article already in detail view -->
<div class="search-list">
  <p><a href="{{ x.get_absolute_url }}">{{ x.title }}</a> {{ x.py }} {{ x.authors }} </p>
  <p>{{ x.source }} Volume: {{ x.volume }} Issue: {{ x.issue }} <a href="https://doi.org/{{ x.doi }}">Fulltext</a></p>
</div>
 {% endifnotequal %}
{% endfor %}
{% endfor %}



{% for theme in article|get_related_all %}
{{ theme }}



{% endfor %}

	{% if forms %}




	<br><br><hr><br><br>



	<h5> Article id is: {{article.id}}</h5>

	<h6>This part is only for admin. No other user will be able to access it</h6>

<br>

	<button class="form-control col-3" onclick='$( "#admindiv" ).toggle();'> Toggle menu </button>
	<br><br>

	<form method="get"  action="{% url 'publications:admin_change' %}">

		<input type="hidden" name="pub_id" value="{{article.id}}">


	<div id="admindiv" class="row">
	{% for form in forms %}

	<div class="col-3" >

		{{form.cat }}

		<hr>

		{{form}}


	</div>

	{% endfor %}

</div>
<br><br>

<button class="form-control col-2 btn btn-success"> Make changes > </button>

</form>

{% endif %}




{% endblock content %}
